{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://arka.video/schema/video.schema.json",
  "title": "arkA Video Metadata Schema",
  "description": "Core metadata structure for arkA protocol v0.1",
  "type": "object",
  "additionalProperties": false,

  "properties": {
    "id": {
      "type": "string",
      "description": "A globally unique identifier for this video (UUID or ULID recommended)."
    },

    "title": {
      "type": "string",
      "description": "Human-readable video title."
    },

    "description": {
      "type": "string",
      "description": "Long-form description or summary."
    },

    "createdAt": {
      "type": "string",
      "format": "date-time",
      "description": "ISO timestamp for when the video was originally created."
    },

    "thumbnail": {
      "type": "string",
      "description": "URL pointing to a static thumbnail file."
    },

    "duration": {
      "type": "number",
      "description": "Total duration in seconds (legacy alias). Prefer durationSeconds."
    },

    "durationSeconds": {
      "type": "number",
      "description": "Total duration in seconds."
    },

    "sources": {
      "type": "array",
      "description": "Where the actual video data is stored.",
      "items": {
        "type": "object",
        "properties": {
          "storageType": {
            "type": "string",
            "enum": ["s3", "r2", "ipfs", "arweave", "http", "local"],
            "description": "Type of backend storage."
          },
          "uri": {
            "type": "string",
            "description": "Direct URI or reference pointer."
          }
        },
        "required": ["storageType", "uri"],
        "additionalProperties": false
      }
    },

    "streaming": {
      "type": "object",
      "description": "Optional segmented streaming formats.",
      "properties": {
        "hls": {
          "type": "string",
          "description": "URL to an HLS (m3u8) manifest."
        },
        "dash": {
          "type": "string",
          "description": "URL to a DASH (MPD) manifest."
        },
        "cmaf": {
          "type": "string",
          "description": "Optional CMAF packaging identifier or manifest."
        }
      },
      "additionalProperties": false
    },

    "creator": {
      "type": "object",
      "description": "Creator identity block.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Display name of the creator or channel."
        },
        "avatar": {
          "type": "string",
          "description": "URL to avatar image."
        },
        "contact": {
          "type": "string",
          "description": "Optional contact URL or handle for the creator."
        }
      },
      "additionalProperties": false
    },

    "safety": {
      "type": "object",
      "description": "Child-safety and neurodiversity metadata.",
      "properties": {
        "rating": {
          "type": "string",
          "enum": ["G", "PG", "13+", "18+"],
          "description": "Coarse content rating."
        },
        "overstimulation": {
          "type": "string",
          "enum": ["low", "medium", "high"],
          "description": "Rough gauge of visual/audio intensity."
        },
        "sensoryNotes": {
          "type": "string",
          "description": "Notes for neurodiverse children (flashing lights, loud sounds, chaos elements)."
        }
      },
      "additionalProperties": false
    }
  },

  "required": ["id", "title", "sources"]
}